# 제어장치의 이해

## 제어장치

- 데이터 경로와 함께 CPU의 주요 구성 요소
- 명령어장치(instrcution unit)라고도 함
- 역할
  - 명령어 해독
  - 제어 신호 생성 : 명령어 실행에 필요한 제어 신호를 생성함
  - 제어 신호 인가 : 데이터 경로를 구성하는 각종 장치에 생성된 제어 신호를 인가함으로써 명령어가 지시하는 작업을 수행하게 함
- 제어장치 구현 방식
  - 고정결선식 제어(hardwired control)
  - 마이크로프로그래밍 제어(microprogrammed control)

## 마이크로 연산과 제어 신호

명령어를 실행하려면 프로세서가 의미 있는 상태 변환을 수행할 수 있도록 프로세서의 다양한 연산이 필요하다. 컴퓨터 시스템의 기능장치나 버스 등을 제어하는 기본적인 연산, 즉 **프로세서의 상태를 변경하는 동작의 기본 단위**를 마이크로 연산(micro operation) 또는 원자 연산(atomic operation), 원시 연산(primitive operation)이라고 한다.

컴퓨터에서 수행할 수 있는 마이크로 연산의 종류는 **프로세서 내부에 있는 레지스터**와 **연산장치의 종류 및 상호 연결 형태에 의해 결정**된다. 제어 신호는 다양한 제어점(control point)에 인가되어 데이터의 흐름을 제어하거나 연산의 종류를 선택한다.

## PROM과 PLA

제어장치에서 제어 신호를 생성하려면 복잡한 논리회로가 필요하다. 최근에는 제어장치가 복잡해짐에 따라 PLD(programmable logic device)를 사용한다. 대부분의 컴퓨터는 대표적인 PLD인 PROM이나 PLA를 사용하여 제어장치를 실현한다.

- PROM(programmable read only memory)
  - ROM 회로의 변종으로, 프로그래밍이 가능함
  - 자주 사용되는 데이터를 영구적으로나 반영구적으로 보관하기 위한 메모리임
  - 모든 종류의 **최소항**을 디코더로 생성하므로 최소항의 합을 사용하면 어떤 종류의 출력도 생성할 수 있음
- PLA(programmable logic array)
  - PROM과 달리 AND 게이트를 사용하기 때문에 불필요한 곱의 항을 생성할 필요가 없음
  - => 동일한 기능일 때 PROM에 비해 작은 칩 공간을 사용
  - 하지만 출력 신호를 변경하거나 추가하는 경우에 필요한 곱의 항이 없을 수도 있음

> 최소항이란? 논리 곱에 대한 조합 방법([링크 참고](https://thrillfighter.tistory.com/228))


# 제어장치 구현 방식

명령어를 실행하기 위해 프로세서는 필요한 제어 신호를 적절한 순서대로 생성하는 장치가 필요한데, 이를 위한 복잡하고 전역적인 장치가 제어장치이다. 그리고 이 제어장치는 오늘날 대부분 **고정결선식**과 **마이크로프로그래밍 방식**을 사용하여 구현된다.

## 제어 신호의 생성

AND 게이트와 같이 조합 논리회로를 사용하는 경우에는 다시 설계해야 하지만, PROM을 사용하는 경우에는 PROM에 저장된 데이터를 다시 프로그래밍하면 되기 때문에 **융통성**이 높다.

## 제어장치 구현의 두 가지 방식

### 고정결선식 제어 방식

디코더를 통해 명령어 레지스터의 연산 부호를 해석한다. 그리고 조합 논리회로가 디코더의 출력과 플래그 레지스터, 외부 장치의 신호 등을 이용하여 각 기능장치나 버스의 제어점에 적절한 제어 신호를 클록에 맞춰 제공한다.

- 장점
  - 최적화할 수 있어서 일반적으로 제어 신호를 빠른 시간에 생성할 수 있음
  - ROM과 달리 불필요한 회로를 제거할 수 있으므로 칩의 크기가 작음
- 단점
  - 명령어 구성이 복잡하거나 개수가 많아지면 제어 장치를 위한 조합 논리회로를 설계하거나 검증하기 매우 복잡하고 어려워짐 => **조합 논리회로 대신 PLA를 사용**하여 동등한 회로를 효과적으로 구현함
  - 연산 부호가 달라지거나 프로세서 상태를 추가해야 할 때 제어장치를 다시 설계해야 함

최근 RISC 아키텍처의 출현으로 명령어 구성이 간단해지고 CAD 기술의 발전으로 복잡한 회로 설계가 용이해짐에 따라 오늘날의 많은 컴퓨터는 고정결선식 방식을 도입하고 있다.

### 마이크로프로그래밍 제어 방식

마이크로 연산을 수행할 수 있도록 마이크로 명령어를 PROM에 프로그래밍하는 방식이다.

- 장점
  - 연산 부호가 바뀌거나 프로세서 상태가 추가될 경우 PROM에 수정된 내용을 프로그래밍하면 되므로 명령어 집합의 변경이 가능
  - 다른 종류의 명령어 집합을 에뮬레이션할 수 있음
  - 동일한 시스템에 다수의 명령어 집합을 구현할 수 있음
  - 컴퓨터의 구성, 타이밍, 기술의 변화에 쉽게 적응할 수 있음
=> 수정 용이, 확장성 등 융통성을 기대할 수 있음

그러나 최근에는 제어장치가 프로세서의 나머지 부분과 하나의 칩으로 집적될 수 있고 시뮬레이션 기술도 발달하여 나중에 **제어장치를 수정할 일이 거의 없다**. 따라서 프로그래밍 방식의 장점이 점차 퇴색하고 있다.


위 내용에 대해 잘 정리된 [참고 링크](http://cafe.daum.net/_c21_/bbs_search_read?grpid=1Iply&fldid=Hsaf&datanum=288)


# 마이크로프로그래밍 방식의 제어장치

책 내용 참고(p.279)