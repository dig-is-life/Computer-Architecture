# 데이터 경로의 이해

## 데이터 경로

**프로세서**
- 데이터를 처리하기 위해 메모리에서 데이터를 읽거나 저장
-  프로세서 내부의 고속 메모리인 레지스터 파일에 데이터를 일시적으로 보관
-  연산장치를 통해 산술연산과 논리연산을 수행함
**데이터 경로**
- 명령어를 실행할 때 프로세서가 명령어의 정의에 따라 데이터를 경유시키는 경로

## 데이터 경로의 두 가지 방식

**단일 사이클 방식**
- [링크 참고](https://www.youtube.com/watch?v=2boNpfT2Jmc)

**다중 사이클 방식**
- [링크 참고](https://www.youtube.com/watch?v=4QL3q146U7Q)


# 명령어 실행과 데이터 경로

## picoMIPS의 명령어 형식
- 책 내용 참고

## picoMIPS 명령어의 단계적 실행
1. 명령어 인출
2. 명령어 해독 및 레지스터 읽기
3. 명령어 종류별 고유 과정

## 데이터 경로의 기본 골격

모든 명령어는 명령어 인출과 해독이라는 공통적인 과정을 거친다.

- 단일 사이클 방식
  - 한 사이클 동안 전체 사이클을 사용하기 때문에 데이터 경로에 포함된 동일한 자원을 다시 사용할 수 없음
  - 데이터 흐름의 중간 과정을 임시 저장소에 보관할 필요가 있음
- 다중 사이클 방식
  - 단일 사이클 방식처럼 메모리를 분할할 필요가 없고, 별도의 PC 갱신장치도 필요없음


# 단일 사이클 방식의 명령어 실행

## 명령어 인출
단일 사이클 방식은 이 단계에서 다음 명령어 주소를 계산하여 PC를 계산할 수 없다.

## 명령어 해독과 레지스터 읽기
인출한 명령어는 명령어 형식에 따라 각종 구성 요소로 분해된다. 연산 부호와 기능 필드는 제어장치로 보내어 해독한다. 자세한 내용은 책 참고

## 명령어 종류별 실행
책 내용 참고


# 다중 사이클 방식의 명령어 실행

## 명령어 인출

- 단일 사이클 방식과 달리 다중 사이클 방식은 별도의 PC 갱신장치가 필요 없음
- PC를 갱신하는 명령어 인출 과정과 ALU를 사용하는 명령어 고유 과정이 다른 사이클에서 수행되고, ALU를 사용하여 PC를 갱신하기 때문(책 그림 7-17 참고)

## 명령어 해독과 레지스터 읽기

- 한 사이클에서 명령어를 해독하는 동안 레지스터 파일에 접근하고 조건 분기 명령어를 위한 메모리 주소도 계산한 후 임시 저장소에 저장
- 만약 다음 사이클에서 임시 저장소의 내용이 필요 없다면 무시

## 덧셈 명령어 실행
- 책 내용 참고

## 적재 명령어 실행
- 책 내용 참고
  

# 데이터 경로의 구체화와 성능 비교

## 데이터 경로의 구체화

문제점 1
  - 데이터 경로의 기본 골격은 다음과 같은 경우에 하나의 입력 단자에 다수의 입력이 주어져서 충돌이 발생하는데, 이는 멀티플렉서로 해결 가능함
    - 단일 사이클 방식 ALU 하단 입력 단자에 2개의 데이터가 입력되는 경우
    - 다중 사이클 방식에서 ALU의 상단 및 하단 입력 단자에 각각 2개와 4개의 데이터가 입력되는 경우
    - 단일 및 다중 사이클 방식에서 레지스터 데이터 입력 단자에 2개의 데이터가 입력되는 경우
  - **멀티플렉서** : 여러 아날로그 또는 디지털 입력 신호 중 하나를 선택하여 선택된 입력을 하나의 라인에 전달하는 장치

문제점 2
  - 책 내용 참고

문제점 3
  - 메모리는 기본 주소 단위로 바이트를 사용하는데 분기 명령어나 적재 및 저장 명령어의 경우 addr 필드와 imm 필드가 워드 단위의 주소임
  - 바이트 단위의 주소로 메모리에 접근하려면 시프터를 사용하여 두 필드를 1바이트 왼쪽으로 시프트해야함
  - 자세한건 책 내용 참고

## 단일 사이클 방식과 다중 사이클 방식의 성능 비교

- 표 7-1 : 명령어 실행을 위한 지연 시간과 사이클 개수 참고
- 다중 사이클 방식이 명령어마다 다른 개수의 사이클을 사용하더라도 단일 사이클 방식이 좋은 성능을 보임
- 만약 곱셈과 나눗셈 같은 복잡한 연산을 포함한다면 단일 사이클 방식의 클록 사이클 시간이 매우 커지므로 다른 결과가 나타날 수 있음
- 파이프라이닝 기법을 사용하여 각 사이클마다 데이터 경로를 중첩 사용하려면 다중 사이클 방식 도입 추천
- 따라서 **오늘날의 컴퓨터는 다중 사이클 방식의 데이터 경로를 사용**함